<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>OpenBCI WiFi Shield API · OpenBCI Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="**[Suggest Changes To This Page](https://github.com/OpenBCI/Docs/edit/master/OpenBCI%20Software/03-OpenBCI_Wifi_Server.md)**"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="OpenBCI WiFi Shield API · OpenBCI Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://openbci.github.io/Documentation/"/><meta property="og:description" content="**[Suggest Changes To This Page](https://github.com/OpenBCI/Docs/edit/master/OpenBCI%20Software/03-OpenBCI_Wifi_Server.md)**"/><meta property="og:image" content="https://openbci.github.io/Documentation/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://openbci.github.io/Documentation/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/Documentation/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/Documentation/js/scrollSpy.js"></script><link rel="stylesheet" href="/Documentation/css/main.css"/><script src="/Documentation/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/Documentation/"><img class="logo" src="/Documentation/img/favicon.ico" alt="OpenBCI Documentation"/><h2 class="headerTitleWithLogo">OpenBCI Documentation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/Documentation/docs/Welcome" target="_self">Documentation</a></li><li class=""><a href="/Documentation/docs/08FAQ/FAQLanding" target="_self">FAQ</a></li><li class=""><a href="/Documentation/docs/07Examples/FocusArduino" target="_self">Examples</a></li><li class=""><a href="/Documentation/citations" target="_self">Citations</a></li><li class=""><a href="/Documentation/help" target="_self">Help</a></li><li class=""><a target="_self"></a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>WiFi Shield</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Welcome to OpenBCI<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/Documentation/docs/Welcome">Welcome to the OpenBCI Community</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Getting Started with OpenBCI<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Boards</h4><ul><li class="navListItem"><a class="navItem" href="/Documentation/docs/01GettingStarted/01-Boards/CytonGS">Cyton Getting Started Guide</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/01GettingStarted/01-Boards/DaisyGS">Daisy Getting Started Guide</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/01GettingStarted/01-Boards/GanglionGS">Ganglion Getting Started Guide</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/01GettingStarted/01-Boards/WiFiGS">WiFi Shield Getting Started Guide</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Bionsensing Setups</h4><ul><li class="navListItem"><a class="navItem" href="/Documentation/docs/01GettingStarted/02-Biosensing-Setups/EEGSetup">Setting up for EEG</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/01GettingStarted/02-Biosensing-Setups/ECGSetup">Setting up for ECG</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/01GettingStarted/02-Biosensing-Setups/EMGSetup">Setting up for EMG</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Community</h4><ul><li class="navListItem"><a class="navItem" href="/Documentation/docs/01GettingStarted/03-Community/Community">Welcome to the OpenBCI Community</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Cyton Board<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/Documentation/docs/02Cyton/CytonLanding">Cyton Board</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/02Cyton/CytonSpecs">Cyton Specs</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/02Cyton/CytonDataFormat">Cyton Data Format</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/02Cyton/CytonSDK">Cyton Board SDK</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/02Cyton/CytonProgram">Cyton Board Programming Tutorial</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/02Cyton/CytonRadios">Cyton Radios Programming Tutorial</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/02Cyton/CytonExternal">External Trigger on OpenBCI Cyton Board</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/02Cyton/CytonSDCard">Using SD Card with OpenBCI</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Ganglion Board<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/Documentation/docs/03Ganglion/GanglionLanding">Ganglion Board</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/03Ganglion/GanglionSpecs">Ganglion Specs</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/03Ganglion/GanglionDataFormat">Ganglion Data Format</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/03Ganglion/GanglionSDK">Ganglion SDK</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/03Ganglion/GanglionProgram">Ganglion Programming Tutorial</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Third Party Hardware<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Myoware</h4><ul><li class="navListItem"><a class="navItem" href="/Documentation/docs/05ThirdParty/01 - Myoware/MyoCyton">MyoWare OpenBCI Integration (Cyton Board)</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/05ThirdParty/01 - Myoware/MyoGanglion">MyoWare OpenBCI Integration (Ganglion Board)</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">WiFi Shield</h4><ul><li class="navListItem"><a class="navItem" href="/Documentation/docs/05ThirdParty/03 - WiFi Shield/WiFiLanding">OpenBCI WiFi</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/05ThirdParty/03 - WiFi Shield/WiFiProgam">Wifi Shield Programming Tutorial</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/Documentation/docs/05ThirdParty/03 - WiFi Shield/WiFiAPI">OpenBCI WiFi Shield API</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/05ThirdParty/03 - WiFi Shield/WiFiSDK">OpenBCI Wifi SDK</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Board Add-Ons (Electrodes, Headwear)<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Headwear</h4><ul><li class="navListItem"><a class="navItem" href="/Documentation/docs/04AddOns/Headwear/MarkIV">Ultracortex Mark IV</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/04AddOns/Headwear/MarkIII">Ultracortex Mark III</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/04AddOns/Headwear/HeadBand">OpenBCI EEG Headband Kit Guide</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/04AddOns/Headwear/ElectrodeCap">Electrode Cap Getting Started Guide</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Compatible Software<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Developed By OpenBCI</h4><ul><li class="navListItem"><a class="navItem" href="/Documentation/docs/06Software/01 - OpenBCI Software/GUIDocs">The OpenBCI GUI</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/06Software/01 - OpenBCI Software/GUIWidgets">GUI Widget Guide</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/06Software/01 - OpenBCI Software/Python">Python and OpenBCI</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/06Software/01 - OpenBCI Software/Hub">OpenBCI Hub</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Compatible Third Party Software</h4><ul><li class="navListItem"><a class="navItem" href="/Documentation/docs/06Software/02 - Compatible Third Party Software/Matlab">MATLAB</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/06Software/02 - Compatible Third Party Software/Neuromore">Neuromore</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/06Software/02 - Compatible Third Party Software/OpenVibe">OpenViBE</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/06Software/02 - Compatible Third Party Software/LSL">Lab Streaming Layer (LSL)</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/06Software/02 - Compatible Third Party Software/BrainBay">BrainBay</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/06Software/02 - Compatible Third Party Software/BioEra">BioEra</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Deprecated Documents<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/Documentation/docs/09Deprecated/DeprecatedLanding">DeprecatedDocs</a></li><li class="navListItem"><a class="navItem" href="/Documentation/docs/09Deprecated/SpiderclawDep">Spiderclaw</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Troubleshooting<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/Documentation/docs/10Troubleshooting/minimizingNoise">Minimizing Noise</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">OpenBCI WiFi Shield API</h1></header><article><div><span><p><strong><a href="https://github.com/OpenBCI/Docs/edit/master/OpenBCI%20Software/03-OpenBCI_Wifi_Server.md">Suggest Changes To This Page</a></strong></p>
<p>The OpenBCI Wifi Shield seeks to offer a plug and play Wifi solution for the OpenBCI Cyton and Ganglion.</p>
<h2><a class="anchor" aria-hidden="true" id="overview"></a><a href="#overview" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Overview</h2>
<p>One of the coolest parts of the WiFi Shield is its HTTP web server. For developers looking to get data from OpenBCI with a WiFi Shield, these HTTP commands will allow you to stream data to your applications over TCP or MQTT.</p>
<h2><a class="anchor" aria-hidden="true" id="prerequisites"></a><a href="#prerequisites" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prerequisites</h2>
<p>Follow the <a href="http://docs.openbci.com/Tutorials/03-Wifi_Getting_Started_Guide#wifi-getting-started-guide-prerequisites">WiFi Getting Started Guide</a> to get your WiFi Shield on your Wireless Network.</p>
<h2><a class="anchor" aria-hidden="true" id="get-wifi-shield-on-local-wireless-network"></a><a href="#get-wifi-shield-on-local-wireless-network" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Get Wifi Shield on Local Wireless Network</h2>
<p>Be sure that your WiFi Shield is on your local network.</p>
<p>The steps for connecting to the Wifi Shield and streaming over TCP:</p>
<ol>
<li>Get IP Address of the Wifi Shield</li>
<li>Open a TCP Socket on Host Computer</li>
<li>Send <code>POST</code> <code>/tcp</code> http request with open socket IP/Port number, can include options (i.e. output format of JSON or RAW output, use delimiters between packets, adjust latency)</li>
<li>Send <code>GET</code> <code>/stream/start</code> or <code>GET</code> <code>/stream/stop</code></li>
</ol>
<p>The steps for connecting to the Wifi Shield and streaming over MQTT:</p>
<ol>
<li>Find IP Address of Wifi Shield</li>
<li>Set up MQTT broker</li>
<li>Send <code>POST</code> <code>/mqtt</code> http request with broker address with optional username and password</li>
<li>Send <code>GET</code> <code>/stream/start</code> or <code>GET</code> <code>/stream/stop</code></li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="get-ip-address-of-wifi-shield"></a><a href="#get-ip-address-of-wifi-shield" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Get IP Address of Wifi Shield</h2>
<p>To programmatically discover WiFi Shields on your local network use <a href="https://en.wikipedia.org/wiki/Simple_Service_Discovery_Protocol">Simple Service Discovery Protocol</a> (SSDP) to find the device on your local network.</p>
<p><a href="https://github.com/aj-ptw/OpenBCI_NodeJS/blob/wifi/examples/getStreamingWifi/getStreamingWifi.js">Node.js OpenBCI WiFi Driver</a> will implement SSDP for you.</p>
<p><a href="https://github.com/OpenBCI/OpenBCI_Python/pull/54">Python OpenBCI WiFi Driver</a> will implement SSDP for you.</p>
<p>Use the <a href="http://docs.openbci.com/Tutorials/03-Wifi_Getting_Started_Guide#wifi-getting-started-guide-get-wifi-shield-ip-mac-address-firmware-version-and-more-get-wifi-shield-ip-address">OpenBCI WiFi GUI</a> which will use the <a href="http://docs.openbci.com/OpenBCI%20Software/07-OpenBCI_Hub#openbci-electron-hub-command-set-scan">OpenBCI Electron Hub</a> to find WiFi Shields IP Address.</p>
<p>Use a graphical user interface <a href="https://itunes.apple.com/us/app/lanscan/id472226235?mt=12">Mac - Lan Scan</a></p>
<p>We are still hashing out the best ways to discover the Wifi shield on the networks (home vs. enterprise and beyond) so <a href="https://github.com/OpenBCI/OpenBCI_WIFI/issues/8">please contribute ides if you have any on this github issue</a> and we can add it in! <a href="https://github.com/OpenBCI/OpenBCI_WIFI/issues/9">Wifi Direct Feature Request (researcher frequently requested feature)</a></p>
<h2><a class="anchor" aria-hidden="true" id="open-a-tcp-socket-on-host-computer"></a><a href="#open-a-tcp-socket-on-host-computer" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Open a TCP Socket on Host Computer</h2>
<p>In order to get low latency high-reliability wireless data transmission we will open a TCP socket on your host Computer. The Wifi Shield will stream data to this socket.</p>
<h3><a class="anchor" aria-hidden="true" id="raw-output-mode"></a><a href="#raw-output-mode" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Raw Output Mode</h3>
<p>In <code>raw</code> output mode the data format follows the OpenBCI <a href="http://docs.openbci.com/Hardware/03-Cyton_Data_Format#cyton-data-format-binary-format">33byte Binary Data Format</a>. Even the Ganglion over WiFi Shield will send in the 33byte with the first four channels containing data and the upper four channels are all zeros.</p>
<h3><a class="anchor" aria-hidden="true" id="json-output-mode"></a><a href="#json-output-mode" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JSON Output Mode</h3>
<p>In <code>json</code> output mode, the WiFi Shield will convert raw data into nano volts. As of <code>v3.0.0</code> firmware for Cyton and <code>v2.0.0</code> firmware for Ganglion, the gain for each channel will be sent to the WiFi Shield once at the first connection between devices, and once each time the Ganglion or Cyton receives a start of streaming command. The WiFi Shield will connect to an NTP server to get the time once, and the WiFi Shield will then send the data in JSON.</p>
<p>The JSON Adheres to the popular LSL stream format by default</p>
<pre><code class="hljs">{
  <span class="hljs-string">"chunk"</span>: [
    {<span class="hljs-string">"data"</span>: <span class="hljs-meta">[&lt;float&gt;, ..., &lt;float&gt;]</span>,  <span class="hljs-string">"timestamp"</span>: &lt;float&gt; },
    ...
    {<span class="hljs-string">"data"</span>: <span class="hljs-meta">[&lt;float&gt;, ..., &lt;float&gt;]</span>,  <span class="hljs-string">"timestamp"</span>: &lt;float&gt; }
  ]
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="examples"></a><a href="#examples" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples</h4>
<p>Buffer of 5 samples. Each sample has 4 channels:</p>
<pre><code class="hljs">[
  { <span class="hljs-attr">"data"</span>:[ <span class="hljs-number">7056745022195285</span>, <span class="hljs-number">-475495395375</span>, <span class="hljs-number">475495395375</span>, <span class="hljs-number">-495395375</span>], <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1497479774194733</span>},
  { <span class="hljs-attr">"data"</span>:[ <span class="hljs-number">7056745022195285</span>, <span class="hljs-number">-475495395375</span>, <span class="hljs-number">475495395375</span>, <span class="hljs-number">-495395375</span>], <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1497479774195230</span>},
  { <span class="hljs-attr">"data"</span>:[ <span class="hljs-number">7056745022195285</span>, <span class="hljs-number">-475495395375</span>, <span class="hljs-number">475495395375</span>, <span class="hljs-number">-495395375</span>], <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1497479774195735</span>},
  { <span class="hljs-attr">"data"</span>:[ <span class="hljs-number">7056745022195285</span>, <span class="hljs-number">-475495395375</span>, <span class="hljs-number">475495395375</span>, <span class="hljs-number">-495395375</span>], <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1497479774196209</span>},
  { <span class="hljs-attr">"data"</span>:[ <span class="hljs-number">7056745022195285</span>, <span class="hljs-number">-475495395375</span>, <span class="hljs-number">475495395375</span>, <span class="hljs-number">-495395375</span>], <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1497479774196715</span>}
]
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="openbci-wifi-shield-http-rest-server"></a><a href="#openbci-wifi-shield-http-rest-server" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>OpenBCI WiFi Shield HTTP Rest Server</h2>
<h3><a class="anchor" aria-hidden="true" id="send-tcp-http-request-for-tcp-configuration"></a><a href="#send-tcp-http-request-for-tcp-configuration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Send <code>/tcp</code> http request for TCP configuration</h3>
<p>Refer to <a href="https://app.swaggerhub.com/apis/pushtheworld/openbci-wifi-server/1.3.0">http server description</a> swagger.io page as the single source of truth in regards to the OpenBCI Wifi Server. There are many options such as <code>output</code> mode for JSON or raw output, latency, delimiters and many more awesome options to help you easily process data in a driver.</p>
<h3><a class="anchor" aria-hidden="true" id="send-mqtt-http-request-for-mqtt-configuration"></a><a href="#send-mqtt-http-request-for-mqtt-configuration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Send <code>/mqtt</code> http request for MQTT configuration</h3>
<p>Refer to <a href="https://app.swaggerhub.com/apis/pushtheworld/openbci-wifi-server/1.3.0">http server description</a> swagger.io page as the single source of truth in regards to the OpenBCI Wifi Server. There are many options such as <code>output</code> mode for JSON or raw output, latency, delimiters and many more awesome options to help you easily process data in a driver.</p>
<h3><a class="anchor" aria-hidden="true" id="send-command-http-requests-for-control"></a><a href="#send-command-http-requests-for-control" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Send <code>/command</code> http requests for control</h3>
<p>Refer to <a href="https://app.swaggerhub.com/apis/pushtheworld/openbci-wifi-server/1.3.0">http server description</a> swagger.io page as the single source of truth in regards to the OpenBCI Wifi Server. To change the sample rate of the Cyton, please use the <code>~</code> command as defined in the Cyton SDK docs.</p>
<h3><a class="anchor" aria-hidden="true" id="send-latency-http-requests-for-tuning"></a><a href="#send-latency-http-requests-for-tuning" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Send <code>/latency</code> http requests for tuning</h3>
<p>Refer to <a href="https://app.swaggerhub.com/apis/pushtheworld/openbci-wifi-server/1.3.0">http server description</a> swagger.io page as the single source of truth in regards to the OpenBCI Wifi Server.</p>
<p>The time in micro seconds (us) between packet sends. The higher the OpenBCI sample rate, the higher the latency needed. Default is 1000us, minimum stable is 50us. For upper limit sample rates such as 4kHz/8kHz/16kHz, latency around 20ms seems to really stabilize the system.</p>
<h2><a class="anchor" aria-hidden="true" id="parsing-data-from-wifi-shield"></a><a href="#parsing-data-from-wifi-shield" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parsing Data from Wifi Shield</h2>
<p>Data can be sent from the Wifi shield in two different formats: <code>raw</code> and <code>JSON</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="raw-byte-stream-format"></a><a href="#raw-byte-stream-format" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>raw</code> Byte Stream Format</h3>
<p>The first byte to send is the control byte. For streaming data, that goes on the TCP socket, send <code>0xCX</code> (where <code>X</code> is <code>0-F</code> in hex) as the control byte. In the <code>OpenBCI_32bit_Library</code> code base:</p>
<pre><code class="hljs"><span class="hljs-comment">/*  
 * @description Writes channel data and axisData array to serial port in
 *  the correct stream packet format.
 */</span>
void OpenBCI_32bit_Library::send<span class="hljs-constructor">ChannelDataWifi(<span class="hljs-params">void</span>)</span>  {

    wifi<span class="hljs-constructor">StoreByte(OPENBCI_EOP_STND_ACCEL)</span>; <span class="hljs-comment">// 0xC0 1 byte</span>

    wifi<span class="hljs-constructor">StoreByte(<span class="hljs-params">sampleCounter</span>)</span>; <span class="hljs-comment">// 1 byte</span>

    <span class="hljs-constructor">ADS_writeChannelDataWifi()</span>; <span class="hljs-comment">// 24 bytes</span>

    accel<span class="hljs-constructor">WriteAxisDataWifi()</span>; <span class="hljs-comment">// 6 bytes</span>

    wifi<span class="hljs-constructor">FlushBuffer()</span>; <span class="hljs-comment">// Flushes the buffer to the SPISlave ESP8266 device!</span>

    sampleCounter++;

}
</code></pre>
<p>This code writes 32 bytes of data in the correct format and therefore as soon as it arrives at the Wifi shield. The Wifi shield will convert the 32 byte packet to the standard 33 byte <a href="http://docs.openbci.com/Hardware/03-Cyton_Data_Format#cyton-data-format-binary-format">binary format</a> by moving the control byte <code>0xCn</code>, where <code>n</code> is <code>0-F</code> (hex), to the stop position and add add <code>0xA0</code> to the start position. This allows for a seamless integration with the tried and tested parsing systems already built for the Cyton.
<strong>Important</strong> if you want to only send <code>20</code> bytes of data per packet, you still must send this <code>32</code> bytes with the proper start and stop bytes.</p>
<h3><a class="anchor" aria-hidden="true" id="json-format"></a><a href="#json-format" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JSON format</h3>
<p>Suggested options for <code>POST</code> /tcp or <code>POST</code> /mqtt</p>
<pre><code class="hljs">{
  <span class="hljs-string">"port"</span>: ..., <span class="hljs-comment">// Enter your local server port</span>
  <span class="hljs-string">"ip"</span>: ..., <span class="hljs-comment">// Enter your local ip address of server</span>
  <span class="hljs-string">"delimiter"</span>: <span class="hljs-keyword">true</span>, <span class="hljs-comment">// will place `\r\n` at end of each chunk</span>
  <span class="hljs-string">"latency"</span>: <span class="hljs-number">20000</span>, <span class="hljs-comment">// Time to wait between packet sends in micro seconds.. i.e. latency here is 20ms</span>
  <span class="hljs-string">"sample_numbers"</span>: <span class="hljs-keyword">false</span>, <span class="hljs-comment">// Don't include sampleNumber in each sample</span>
  <span class="hljs-string">"timestamps"</span>: <span class="hljs-keyword">true</span> <span class="hljs-comment">// Include timestamps in each sample</span>
}

Now <span class="hljs-keyword">when</span> you start streaming data, you can simply look <span class="hljs-keyword">for</span> `\r\n` <span class="hljs-keyword">in</span> the incoming stream <span class="hljs-keyword">of</span> data <span class="hljs-keyword">and</span> each time you find it, you know you just got <span class="hljs-keyword">then</span> <span class="hljs-keyword">end</span> <span class="hljs-keyword">of</span> packet <span class="hljs-keyword">and</span> can parse everything before that `\r\n` <span class="hljs-keyword">as</span> JSON.
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/Documentation/docs/05ThirdParty/03%20-%20WiFi%20Shield/WiFiProgam"><span class="arrow-prev">← </span><span>Wifi Shield Programming Tutorial</span></a><a class="docs-next button" href="/Documentation/docs/05ThirdParty/03%20-%20WiFi%20Shield/WiFiSDK"><span class="function-name-prevnext">OpenBCI Wifi SDK</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#overview">Overview</a></li><li><a href="#prerequisites">Prerequisites</a></li><li><a href="#get-wifi-shield-on-local-wireless-network">Get Wifi Shield on Local Wireless Network</a></li><li><a href="#get-ip-address-of-wifi-shield">Get IP Address of Wifi Shield</a></li><li><a href="#open-a-tcp-socket-on-host-computer">Open a TCP Socket on Host Computer</a><ul class="toc-headings"><li><a href="#raw-output-mode">Raw Output Mode</a></li><li><a href="#json-output-mode">JSON Output Mode</a></li></ul></li><li><a href="#openbci-wifi-shield-http-rest-server">OpenBCI WiFi Shield HTTP Rest Server</a><ul class="toc-headings"><li><a href="#send-tcp-http-request-for-tcp-configuration">Send <code>/tcp</code> http request for TCP configuration</a></li><li><a href="#send-mqtt-http-request-for-mqtt-configuration">Send <code>/mqtt</code> http request for MQTT configuration</a></li><li><a href="#send-command-http-requests-for-control">Send <code>/command</code> http requests for control</a></li><li><a href="#send-latency-http-requests-for-tuning">Send <code>/latency</code> http requests for tuning</a></li></ul></li><li><a href="#parsing-data-from-wifi-shield">Parsing Data from Wifi Shield</a><ul class="toc-headings"><li><a href="#raw-byte-stream-format"><code>raw</code> Byte Stream Format</a></li><li><a href="#json-format">JSON format</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/Documentation/" class="nav-home"><img src="/Documentation/img/favicon.ico" alt="OpenBCI Documentation" width="66" height="58"/></a><div><h5>Docs</h5><a href="/Documentation/docs/en/doc1.html">Getting Started (or other categories)</a><a href="/Documentation/docs/en/doc2.html">Guides (or other categories)</a><a href="/Documentation/docs/en/doc3.html">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="/Documentation/en/users.html">User Showcase</a><a href="https://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/Documentation/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://opensource.facebook.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/Documentation/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2019 OpenBCI</section></footer></div></body></html>